{"version":3,"file":"rating_delete.min.js","sources":["../src/rating_delete.js"],"sourcesContent":["define(['jquery', 'core/ajax', 'core/notification', 'core/str', 'core/modal_factory', 'core/modal_events', 'core/pending'],\n    function ($, Ajax, Notification, Str, ModalFactory, ModalEvents, Pending) {\n\n        /**\n         * Initializes the delete rating functionality.\n         * @method init\n         * @private\n         */\n        const init = function () {\n            var pendingPromise = new Pending('format_mintcampus/rating_delete:init');\n\n            // Event listener for delete button click\n            $('.delete-rating').on('click', function () {\n                const ratingid = $(this).data('ratingid');\n\n                // Confirmation modal\n                ModalFactory.create({\n                    title: Str.get_string('confirmdeletion', 'format_mintcampus'),\n                    body: Str.get_string('confirmdeletemsg', 'format_mintcampus'),\n                    type: ModalFactory.types.SAVE_CANCEL\n                }).then(function (modal) {\n                    modal.setSaveButtonText(Str.get_string('delete', 'core'));\n\n                    // Handle save (delete confirmation)\n                    modal.getRoot().on(ModalEvents.save, function (e) {\n                        e.preventDefault();\n\n                        // Perform AJAX request to delete rating\n                        Ajax.call([{\n                            methodname: 'format_mintcampus_delete_rating',\n                            args: { ratingid: ratingid }\n                        }])[0].then(function (response) {\n                            if (response.status === 'success') {\n                                Notification.alert(\n                                    Str.get_string('deletionsuccess', 'format_mintcampus'),\n                                    Str.get_string('ratingsuccessfullydeleted', 'format_mintcampus'),\n                                    Str.get_string('close', 'format_mintcampus')\n                                );\n                                $(`.rating-item[data-ratingid=\"${ratingid}\"]`).fadeOut();\n                            } else {\n                                Notification.alert(\n                                    Str.get_string('deletionerror', 'format_mintcampus'),\n                                    response.message,\n                                    Str.get_string('close', 'format_mintcampus')\n                                );\n                            }\n                        }).fail(Notification.exception)\n                          .always(pendingPromise.resolve);\n                    });\n\n                    // Handle hidden event (cleanup)\n                    modal.getRoot().on(ModalEvents.hidden, function () {\n                        modal.destroy();\n                    });\n\n                    modal.show();\n                }).catch(Notification.exception);\n            });\n        };\n\n        return {\n            init: init\n        };\n    }\n);\n"],"names":["define","$","Ajax","Notification","Str","ModalFactory","ModalEvents","Pending","init","pendingPromise","on","ratingid","this","data","create","title","get_string","body","type","types","SAVE_CANCEL","then","modal","setSaveButtonText","getRoot","save","e","preventDefault","call","methodname","args","response","status","alert","fadeOut","message","fail","exception","always","resolve","hidden","destroy","show","catch"],"mappings":"AAAAA,wCAAO,CAAC,SAAU,YAAa,oBAAqB,WAAY,qBAAsB,oBAAqB,iBACvG,SAAUC,EAAGC,KAAMC,aAAcC,IAAKC,aAAcC,YAAaC,eA2DtD,CACHC,KArDS,eACLC,eAAiB,IAAIF,QAAQ,wCAGjCN,EAAE,kBAAkBS,GAAG,SAAS,iBACtBC,SAAWV,EAAEW,MAAMC,KAAK,YAG9BR,aAAaS,OAAO,CAChBC,MAAOX,IAAIY,WAAW,kBAAmB,qBACzCC,KAAMb,IAAIY,WAAW,mBAAoB,qBACzCE,KAAMb,aAAac,MAAMC,cAC1BC,MAAK,SAAUC,OACdA,MAAMC,kBAAkBnB,IAAIY,WAAW,SAAU,SAGjDM,MAAME,UAAUd,GAAGJ,YAAYmB,MAAM,SAAUC,GAC3CA,EAAEC,iBAGFzB,KAAK0B,KAAK,CAAC,CACPC,WAAY,kCACZC,KAAM,CAAEnB,SAAUA,aAClB,GAAGU,MAAK,SAAUU,UACM,YAApBA,SAASC,QACT7B,aAAa8B,MACT7B,IAAIY,WAAW,kBAAmB,qBAClCZ,IAAIY,WAAW,4BAA6B,qBAC5CZ,IAAIY,WAAW,QAAS,sBAE5Bf,wCAAiCU,gBAAcuB,WAE/C/B,aAAa8B,MACT7B,IAAIY,WAAW,gBAAiB,qBAChCe,SAASI,QACT/B,IAAIY,WAAW,QAAS,yBAGjCoB,KAAKjC,aAAakC,WAClBC,OAAO7B,eAAe8B,YAI7BjB,MAAME,UAAUd,GAAGJ,YAAYkC,QAAQ,WACnClB,MAAMmB,aAGVnB,MAAMoB,UACPC,MAAMxC,aAAakC"}
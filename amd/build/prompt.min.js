define("format_mintcampus/prompt",["jquery","core/ajax","core/notification","core/str","core/templates","core/modal_factory","core/modal_events","core/pending"],(function($,Ajax,Notification,Str,Templates,ModalFactory,ModalEvents,Pending){return{init:function(){var pendingPromise=new Pending("format_mintcampus/prompt:init");$("#mintcampuscourserating").click((function(){const courseid=$(this).attr("data-id");Ajax.call([{methodname:"format_mintcampus_get_rating",args:{courseid:courseid}}])[0].then((function(ratingprompt){ModalFactory.create({title:Str.get_string("courserating","format_mintcampus"),body:ratingprompt.ratingprompt,type:ModalFactory.types.SAVE_CANCEL,large:!0}).then((function(modal){modal.setSaveButtonText(Str.get_string("save","core"));function handleInputChange(e){let target=e.target;const min=target.min,max=target.max,val=target.value;target.style.backgroundSize=100*(val-min)/(max-min)+"% 100%"}document.querySelectorAll('input[type="range"]').forEach((input=>{input.addEventListener("input",handleInputChange);let min=input.min,max=input.max,val=input.value;input.style.backgroundSize=100*(val-min)/(max-min)+"% 100%"})),modal.getRoot().on(ModalEvents.save,(function(e){var submission=$("#mintcampus_comment").val();Ajax.call([{methodname:"format_mintcampus_save_comment",args:{courseid:courseid,submission:submission}}])[0].then((function(){})).always(pendingPromise.resolve).catch(Notification.exception);var rating=$("input[name='stars']:checked").val();Ajax.call([{methodname:"format_mintcampus_save_rating",args:{courseid:courseid,rating:rating}}])[0].then((function(){})).always(pendingPromise.resolve).catch(Notification.exception),Notification.alert(Str.get_string("ratingsavesuccessheader","format_mintcampus"),Str.get_string("ratingsavesuccess","format_mintcampus"),Str.get_string("close","format_mintcampus"))})),modal.getRoot().on(ModalEvents.hidden,(function(){modal.destroy()})),modal.show()})).catch(Notification.exception)})).always(pendingPromise.resolve).catch(Notification.exception)}))}}}));

//# sourceMappingURL=prompt.min.js.map